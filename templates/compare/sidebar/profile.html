<div class="flex w-full items-center" x-data="{ dropdownPanel: false }" @click.outside="dropdownPanel = false">
  <button
  class="group relative inline-flex items-center justify-start rounded-full w-full cursor-pointer duration-200 ease-in-out transition-color overflow-hidden hover:bg-gray-300"
  x-bind:class="{
  'h-full hover:bg-green-900/30 dark:hover:bg-green-300/40': $store.sidebar.isOpen,
  'dark:hover:bg-zinc-700' : !$store.sidebar.isOpen,
  'bg-green-900/30 dark:bg-green-300/40': dropdownPanel && $store.sidebar.isOpen,
  'bg-gray-300 dark:bg-zinc-700': dropdownPanel && !$store.sidebar.isOpen,
  }"
  @click="dropdownPanel = !dropdownPanel"
  >
    <div class="flex flex-row items-center" :class="$store.sidebar.isOpen ? 'gap-0' : 'gap-4'">
      <div class="w-10 h-10 flex items-center justify-center">
        <svg class="fill-green-900 dark:fill-green-300/70" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
          <!--!Font Awesome Pro v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.-->
          <path d="M463 448.2C440.9 409.8 399.4 384 352 384L288 384C240.6 384 199.1 409.8 177 448.2C212.2 487.4 263.2 512 320 512C376.8 512 427.8 487.3 463 448.2zM64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM320 336C359.8 336 392 303.8 392 264C392 224.2 359.8 192 320 192C280.2 192 248 224.2 248 264C248 303.8 280.2 336 320 336z"/>
        </svg>
      </div>
      <div
      class="py-2 px-4 flex flex-row items-center text-start text-lg font-title font-bold whitespace-nowrap opacity-0"
      aria-hidden="true"
      :class="$store.sidebar.isOpen ? 'opacity-100' : 'opacity-0'"
      >
        <div class="flex flex-col">
        <p class="text-black text-base dark:text-white">{{ request.user }}</p>
        <p class="text-gray-600 text-sm dark:text-gray-400">{% if request.user.is_superuser %}Superuser{% else %}Staff{% endif %}</p>
        </div>
        <svg
        class="group-hover:rotate-180 duration-500 transition-transform absolute right-2 text-black dark:text-white"
        :class="dropdownPanel && 'rotate-180'"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        >
          <path d="M7 14L12 19L17 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
  </button>
  <div
  class="absolute -top-26 w-[17.2rem] bg-gray-50 p-2 rounded-lg border-2 border-green-900/40 font-base z-40 dark:bg-zinc-700 dark:text-white dark:border-green-400/40"
  x-show="dropdownPanel"
  x-transition:enter="transition ease-out duration-300"
  x-transition:enter-start="opacity-0 transform translate-y-full"
  x-transition:enter-end="opacity-100 transform translate-y-0"
  >
    <ul>
      <li class="block border-b-2 border-dotted border-green-900/40 dark:border-green-400/40">
        <a class="inline-block w-full p-2 hover:bg-gray-200 rounded-md dark:hover:bg-zinc-800" href="">Change Password</a>
      </li>
      <li class="block">
        <a class="inline-block w-full p-2 hover:bg-gray-200 rounded-md dark:hover:bg-zinc-800" href="">Logout</a>
      </li>
    </ul>
  </div>
</div>
